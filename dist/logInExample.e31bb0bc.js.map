{"version":3,"sources":["index.js"],"names":["usernameInput","document","querySelector","passwordInput","submitButton","loginToken","localStorage","getItem","checkLogin","form","addEventListener","event","preventDefault","data","username","value","password","fetch","method","headers","body","JSON","stringify","then","res","json","token","catch","error","console","log","showError","classList","add","hideError","remove","setItem","showUserInfo","user","userMail","innerHTML","email"],"mappings":"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","file":"logInExample.e31bb0bc.js","sourceRoot":"..","sourcesContent":["\r\nconst usernameInput = document.querySelector('.loginUsername')\r\n//console.log(usernameInput)\r\nconst passwordInput = document.querySelector('.password')\r\n//console.log(password)\r\nconst submitButton = document.querySelector('.submit')\r\n//console.log(submitButton)\r\nconst loginToken = localStorage.getItem(`loginToken`)\r\nif(loginToken){\r\n    checkLogin(loginToken)\r\n}\r\nconst form = document.querySelector('form')\r\n//console.log(form)\r\n\r\nform.addEventListener('submit', function (event) {\r\n    //console.log(event)\r\n    event.preventDefault()\r\n    //console.log(usernameInput.value)\r\n    //console.log(passwordInput.value)\r\n    const data = {\r\n        username: usernameInput.value,\r\n        password: passwordInput.value,\r\n    }\r\n    //console.log(data)\r\n    // const jsonData = JSON.stringify(data)\r\n    fetch(`https://login-test.wunnle.dev/api/login`, {\r\n        method: `POST`,\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n\r\n    })\r\n        .then(function (res) {\r\n            return res.json()\r\n        })\r\n        .then(function (data) {\r\n            checkLogin(data.token)\r\n\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error)\r\n            showError()\r\n        })\r\n\r\n})\r\n\r\nfunction showError() {\r\n    const error = document.querySelector('.error')\r\n    error.classList.add('visible')\r\n\r\n}\r\n\r\n\r\nfunction hideError() {\r\n    const error = document.querySelector('.error')\r\n    error.classList.remove('visible')\r\n    \r\n}\r\n\r\nfunction checkLogin(token) {\r\n    console.log(token)\r\n    if (token) {\r\n        console.log(`you're logged in `)\r\n        hideError()\r\n        document.querySelector('.signinWrapper').classList.add('invisible')\r\n        localStorage.setItem(`loginToken`,token)\r\n        fetch('https://login-test.wunnle.dev/api/secret',{\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': `bearer ${token}`\r\n            } \r\n        })\r\n        .then(function(res){\r\n            return res.json()\r\n        })\r\n        .then(function(data){\r\n            console.log(data)\r\n\r\n            showUserInfo(data.user)\r\n        })\r\n    }\r\n}\r\n\r\n\r\nfunction showUserInfo(user){\r\n    const username = document.querySelector('.username')\r\n    console.log(username)\r\n    const userMail = document.querySelector('.userMail')\r\n    console.log(userMail)\r\n\r\n    username.innerHTML = user.username\r\n    userMail.innerHTML = user.email\r\n}"]}